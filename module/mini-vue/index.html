<html lang="zh">
  <head>
    <title>Mini Vue Demo</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body style="margin: 0;">
    <p
      style="
        display: -webkit-box;
        margin: 0;
        padding: 0.5em;
        background: #eee;
        color: #cacaca;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 4;
        overflow: hidden;
        user-select: none;
        word-break: break-all;
        line-height: 1.5;
        font-size: 12px;
        letter-spacing: 1px;
      "
    >
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
      <span>MiniVueMiniVueMiniVueMiniVueMiniVue</span>
    </p>
    <div id="app"></div>
  </body>
  <script>
    function dedent (str) {
      const minCount = Math.min(...str
        .match(/(\r?\n)(\s+)/g)
        .map(x => x.slice(1))
        .map(x => x.length)
      )
      return str.replace(new RegExp(`(\\r?\\n)(\\s{${minCount}})`, 'g'), '$1')
    }

    window.onload = () => {
      const Vue = module
      let sectionCount = 1
      const createSection = (msg, vue, pre, titleTag = 'h2') => {
        const $app = document.querySelector('#app')
        const $content = document.createElement('div')
        const $vmount = document.createElement('div')
        const $title = document.createElement(titleTag)

        $content.setAttribute('class', `section-content-${sectionCount++}`)
        $title.innerText = msg

        $app.appendChild($content)
        $content.appendChild($title)
        $content.appendChild($vmount)
        vue  && vue.$mount($vmount)
        if (pre) {
          const $pre = document.createElement('pre')
          $pre.innerText = pre ? dedent(String(pre)) : ''
          $content.appendChild($pre)
        }
      }

      createSection('E2E Test Cases', undefined, undefined, 'h1')

      ;(function createSection1 () {
        createSection('# multy root template', new Vue({
          template: `
            <div><h5>Root NO. 1</h5> <dd><dt>first line</dt><dt>second line</dt><dt>third line</dt></dd></div>
            <div><h5>Root NO. 2</h5> <dd><dt>first line</dt><dt>second line</dt><dt>third line</dt></dd></div>
            <div><h5>Root NO. 3</h5> <dd><dt>first line</dt><dt>second line</dt><dt>third line</dt></dd></div>
          `
        }), createSection1)
      })()

      // $con = createSection('# multy')

      let template = `
        <div class="counter">
          <p>Count Result: {{ this.count }}</p>
          <div v-if="!autoAddTip">
            <button :disabled="this.count >= 3" @click="() => this.count++">+</button>
            <button :disabled="this.count <= 0" @click="() => this.count--">-</button>
            <p>Click "+" to add 1 to count, click "-" to dec 1.</p>
          </div>
        </div>
        <!-- hello comment -->
        <p>Count Status: {{ (this.count > 1) ? 'count > 1' : 'count !> 1' }}</p>
      `
      // template = ``

      const app = new Vue({
        template,
        data () {
          return {
            autoAddTip: true,
            count: 0
          }
        },
        methods: {
          handleClick() {
            console.log('handleClick')
          },
        },
      })
      console.log(app)

      // app.$mount('#app')

      setTimeout(() => {
        // app._data.count = 3
      }, 1000)

      // const task_add3 = setInterval(() => {
      //   app._data.count += 1
      // }, 500)
      // const task_clearTasks = setTimeout(() => {
      //   window.clearInterval(task_add3)
      //   app._data.autoAddTip = false
      // }, 1500)
    }
  </script>
</html>
